(function(){function i(){var i={data:t()};$.getJSON("/dashboard/projeto",i,function(t){t!=null&&t.projetos.length>0?($(n.mensagem).html(""),$.each(t.projetos,function(t,i){$(n.dropProjeto).append($("<option>",{value:i.value,text:i.text}))}),$.each(t.motivos,function(t,i){$(n.dropMotivo).append($("<option>",{value:i.value,text:i.text}))}),$(n.colaborador).val(t.idColaborador)):$(n.mensagem).html("Para esta data não existe projeto e/ou motivos disponíveis.")})}function t(){var t=$(n.periodo).val().split("-");return t[0].trim()}function r(i){var r={projeto:$(n.dropProjeto).val(),dataProjeto:t(),idColaborador:$(n.colaborador).val(),subprojeto:i};$.getJSON("/dashboard/papeis",r,function(t){t!=null&&t.papeis!=null&&t.papeis.length>0?($(n.mensagem).html(""),$(n.blocopapel).removeClass("hidden"),$.each(t.papeis,function(t,i){$(n.dropPapel).append($("<option>",{value:i.value,text:i.text}))})):$(n.blocopapel).addClass("hidden")})}function u(i){var r={projeto:i,idColaborador:$(n.colaborador).val(),dataProjeto:t()};$.getJSON("/dashboard/subprojeto",r,function(t){t!=null&&t.subprojetos!=null&&t.subprojetos.length>0?($(n.mensagem).html(""),$(n.blocosubprojeto).removeClass("hidden"),$.each(t.subprojetos,function(t,i){$(n.dropSubProjeto).append($("<option>",{value:i.value,text:i.text}))})):($(n.mensagem).html(t.msg),$(n.blocosubprojeto).addClass("hidden"))})}function f(){$(n.picker).daterangepicker({maxDate:moment().subtract(1,"days"),locale:{format:"DD/MM/YYYY",applyLabel:"Aplicar",cancelLabel:"Cancelar",daysOfWeek:["Dom","Seg","Ter","Quar","Qui","Sex","Sab"],monthNames:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"]}});$(n.picker).on("apply.daterangepicker",function(){i()})}var n={textoProjeto:"#txtTextoProjeto",textoSubProjeto:"#txtTextoSubProjeto",textoMotivo:"#txtTextoMotivo",textoPapel:"#txtTextoPapel",gerente:"#txtGerente",dropProjeto:"#ddlprojeto",dropSubProjeto:"#ddlsubprojeto",dropMotivo:"#ddlmotivo",dropPapel:"#ddlpapel",mensagem:"#spanMsg",colaborador:"#CodColaborador",periodo:"#dtperiodo",blocopapel:"#divpapel",blocosubprojeto:"#divsubprojeto",picker:".formata-date-picker"};$(document).ready(function(){f();$(n.dropSubProjeto).change(function(){var t=$(this).val();t!=0&&($(n.textoSubProjeto).val($(this).find("option:selected").text()),r(t))});$(n.dropProjeto).change(function(){var i=$(this).val(),t,r;i!=0&&($(n.textoProjeto).val($(this).find("option:selected").text()),u($(this).val()),t=i.split("|"),r={idProjeto:t[0],NomeDoGerente:t[1],EmailDoGerente:t[2],idGerente:t[3]},$(n.gerente).val(r.NomeDoGerente))});$(n.dropPapel).change(function(){var t=$(this).val();t!=0&&t!="0|0"&&$(n.textoPapel).val($(this).find("option:selected").text())});$(n.dropMotivo).change(function(){var t=$(this).val();t!=0&&$(n.textoMotivo).val($(this).find("option:selected").text())});i()})})();